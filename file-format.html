<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Korppi - A modern markdown editor with timeline tracking and reconciliation features">
    <meta name="keywords" content="korppi, markdown, editor, timeline, version control, document editing">
    <meta name="author" content="Korppi Team">
    <title>File Format - Korppi Documentation</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="page-wrapper">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header"><a href="index.html" >KORPPI</a></div><div class="sidebar-section"><div class="sidebar-title">Getting Started</div><ul><li><a href="rationale.html" >Rationale</a></li><li><a href="installation.html" >Installation</a></li><li><a href="quick-start.html" >Quick Start</a></li></ul></div><div class="sidebar-section"><div class="sidebar-title">Documentation</div><ul><li><a href="profile.html" >Configure Profile</a></li><li><a href="first-document.html" >Your First Document</a></li><li><a href="formatting.html" >Text Formatting</a></li><li><a href="comments.html" >Comments and Reviews</a></li><li><a href="reconcile.html" >Reconciliation and Version Control</a></li><li><a href="export.html" >Export Options</a></li></ul></div><div class="sidebar-section"><div class="sidebar-title">Reference</div><ul><li><a href="keyboard-shortcuts.html" >Keyboard Shortcuts</a></li><li><a href="file-format.html" class="current">File Format (.kmd)</a></li><li><a href="configuration.html" >Configuration</a></li></ul></div><div class="sidebar-section"><div class="sidebar-title">Help</div><ul><li><a href="faq.html" >FAQ</a></li><li><a href="troubleshooting.html" >Troubleshooting</a></li><li><a href="contributing.html" >Contributing</a></li></ul></div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <h1>File Format</h1>
            </header>

            <article class="content">
<h1 id="the-kmd-file-format">The .kmd File Format</h1>
<p>Technical details about Korppi's native document format.</p>
<hr />
<h2 id="overview">Overview</h2>
<p>The <code>.kmd</code> (Korppi Markdown Document) format is a
ZIP-based container that stores:</p>
<ul>
<li>Markdown content with cross-reference support</li>
<li>Version history (timeline)</li>
<li>Comments and annotations</li>
<li>Document metadata</li>
<li>Collaborative editing state</li>
</ul>
<hr />
<h2 id="file-structure">File Structure</h2>
<p>A <code>.kmd</code> file is a ZIP archive with this structure:</p>
<pre><code>document.kmd (ZIP archive)
├── content.md           # Main markdown content
├── format.json          # Format version info
├── meta.json            # Document metadata
├── patches/             # Timeline patches
│   ├── index.json       # Patch list
│   └── *.json           # Individual patches
├── comments.json        # Comments and threads
└── ystate.bin           # Yjs CRDT state (binary)</code></pre>
<hr />
<h2 id="formatjson">format.json</h2>
<p>Format version information for compatibility:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;kmd_version&quot;</span><span class="fu">:</span> <span class="st">&quot;0.1.0&quot;</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;min_reader_version&quot;</span><span class="fu">:</span> <span class="st">&quot;0.1.0&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>kmd_version</code></td>
<td>Version of Korppi that created this file</td>
</tr>
<tr class="even">
<td><code>min_reader_version</code></td>
<td>Minimum version required to read this file</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="contentmd">content.md</h2>
<p>The main document content in Markdown format with support for
cross-references.</p>
<h3 id="basic-markdown">Basic Markdown</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># My Document</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>This is the actual markdown content of your document.</span></code></pre></div>
<h3 id="cross-references">Cross-References</h3>
<p>Korppi supports Pandoc-compatible cross-reference syntax for figures,
sections, and tables.</p>
<h4 id="section-labels">Section Labels</h4>
<p>Add <code>{#sec:label}</code> at the end of any heading:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction {#sec:intro}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Methods {#sec:methods}</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>As described in @sec:intro, we use certain methods.</span></code></pre></div>
<h4 id="figure-labels">Figure Labels</h4>
<p>Add <code>{#fig:label}</code> after an image to create a numbered
figure:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="al">![Sales chart showing quarterly data](chart.png)</span>{#fig:sales}</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>As shown in @fig:sales, revenue increased.</span></code></pre></div>
<h4 id="table-labels">Table Labels</h4>
<p>Add <code>{#tbl:label}</code> on a new line after a table:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>| Quarter | Revenue |</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>|---------|---------|</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>| Q1      | $1.2M   |</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>| Q2      | $1.4M   |</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>{#tbl:quarterly}</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>See @tbl:quarterly for the data.</span></code></pre></div>
<h3 id="reference-syntax-summary">Reference Syntax Summary</h3>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>Label Syntax</th>
<th>Reference Syntax</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Section</td>
<td><code>{#sec:label}</code></td>
<td><code>@sec:label</code></td>
<td>Section N</td>
</tr>
<tr class="even">
<td>Figure</td>
<td><code>{#fig:label}</code></td>
<td><code>@fig:label</code></td>
<td>Figure N</td>
</tr>
<tr class="odd">
<td>Table</td>
<td><code>{#tbl:label}</code></td>
<td><code>@tbl:label</code></td>
<td>Table N</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="metajson">meta.json</h2>
<p>Document metadata:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;uuid&quot;</span><span class="fu">:</span> <span class="st">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;My Document&quot;</span><span class="fu">,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;modified_at&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T15:30:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;authors&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;author-uuid&quot;</span><span class="fu">,</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Jane Doe&quot;</span><span class="fu">,</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;email&quot;</span><span class="fu">:</span> <span class="st">&quot;jane@example.com&quot;</span><span class="fu">,</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;joined_at&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;role&quot;</span><span class="fu">:</span> <span class="st">&quot;owner&quot;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;settings&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;language&quot;</span><span class="fu">:</span> <span class="st">&quot;en-US&quot;</span><span class="fu">,</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;spell_check&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;sync_state&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;last_export&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T14:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;pending_patches&quot;</span><span class="fu">:</span> <span class="dv">0</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="fields">Fields</h3>
<table>
<thead>
<tr class="header">
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>uuid</code></td>
<td>string</td>
<td>Unique document identifier</td>
</tr>
<tr class="even">
<td><code>title</code></td>
<td>string</td>
<td>Document title</td>
</tr>
<tr class="odd">
<td><code>created_at</code></td>
<td>string</td>
<td>ISO 8601 creation timestamp</td>
</tr>
<tr class="even">
<td><code>modified_at</code></td>
<td>string</td>
<td>ISO 8601 last modified timestamp</td>
</tr>
<tr class="odd">
<td><code>authors</code></td>
<td>array</td>
<td>List of document authors</td>
</tr>
<tr class="even">
<td><code>settings</code></td>
<td>object</td>
<td>Document settings</td>
</tr>
<tr class="odd">
<td><code>sync_state</code></td>
<td>object</td>
<td>Synchronization state</td>
</tr>
</tbody>
</table>
<h3 id="author-object">Author Object</h3>
<table>
<thead>
<tr class="header">
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>id</code></td>
<td>string</td>
<td>Unique author identifier</td>
</tr>
<tr class="even">
<td><code>name</code></td>
<td>string</td>
<td>Display name</td>
</tr>
<tr class="odd">
<td><code>email</code></td>
<td>string?</td>
<td>Email address (optional)</td>
</tr>
<tr class="even">
<td><code>joined_at</code></td>
<td>string?</td>
<td>When author joined (optional)</td>
</tr>
<tr class="odd">
<td><code>role</code></td>
<td>string?</td>
<td>Role: "owner", "editor", "viewer" (optional)</td>
</tr>
</tbody>
</table>
<h3 id="settings-object">Settings Object</h3>
<table>
<thead>
<tr class="header">
<th>Field</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>language</code></td>
<td>string</td>
<td>"en-US"</td>
<td>Document language</td>
</tr>
<tr class="even">
<td><code>spell_check</code></td>
<td>boolean</td>
<td>true</td>
<td>Enable spell checking</td>
</tr>
</tbody>
</table>
<h3 id="sync-state-object">Sync State Object</h3>
<table>
<thead>
<tr class="header">
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>last_export</code></td>
<td>string?</td>
<td>Last export timestamp (optional)</td>
</tr>
<tr class="even">
<td><code>pending_patches</code></td>
<td>number</td>
<td>Number of unsynced patches</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="patches">patches/</h2>
<p>The timeline patches directory contains version history:</p>
<h3 id="indexjson">index.json</h3>
<p>List of all patches:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;patches&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;patch-001.json&quot;</span><span class="ot">,</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;patch-002.json&quot;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="patch-json">patch-*.json</h3>
<p>Individual patch files:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;patch-001&quot;</span><span class="fu">,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;author&quot;</span><span class="fu">:</span> <span class="st">&quot;Jane Doe&quot;</span><span class="fu">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Added introduction section&quot;</span><span class="fu">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;approved&quot;</span><span class="fu">,</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lines&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;end&quot;</span><span class="fu">:</span> <span class="dv">15</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;diff&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;added&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;removed&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;modified&quot;</span><span class="fu">:</span> <span class="dv">5</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="commentsjson">comments.json</h2>
<p>All comments and threads:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;comments&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;comment-001&quot;</span><span class="fu">,</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;author&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Jane Doe&quot;</span><span class="fu">,</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#ff5733&quot;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;This needs clarification&quot;</span><span class="fu">,</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;unresolved&quot;</span><span class="fu">,</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;anchor&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;end&quot;</span><span class="fu">:</span> <span class="dv">150</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;replies&quot;</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="ystatebin">ystate.bin</h2>
<p>Binary Yjs CRDT state for real-time sync.</p>
<p>This file enables:</p>
<ul>
<li>Conflict-free editing</li>
<li>State synchronization</li>
<li>Undo/redo history</li>
<li>Collaborative editing</li>
</ul>
<p>⚠️ This file is binary and not human-readable.</p>
<hr />
<h2 id="export-formats">Export Formats</h2>
<p>Korppi can export to several formats:</p>
<h3 id="docx-export">DOCX Export</h3>
<p>Export to Microsoft Word format with:</p>
<ul>
<li>Headings preserved with proper styles</li>
<li>Bold, italic, and strikethrough formatting</li>
<li>Ordered and unordered lists</li>
<li>Tables with headers</li>
<li>Code blocks with monospace font</li>
<li>Block quotes</li>
<li><strong>Cross-references resolved</strong> (e.g.,
<code>@fig:sales</code> → "Figure 1")</li>
<li><strong>Figure labels stripped</strong> from output</li>
</ul>
<h3 id="markdown-export">Markdown Export</h3>
<p>Plain markdown with all cross-reference syntax preserved.</p>
<hr />
<h2 id="working-with-kmd-files">Working with .kmd Files</h2>
<h3 id="extracting-content">Extracting Content</h3>
<p>To extract just the markdown:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> <span class="at">-p</span> document.kmd content.md <span class="op">&gt;</span> output.md</span></code></pre></div>
<h3 id="inspecting-metadata">Inspecting Metadata</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> <span class="at">-p</span> document.kmd meta.json <span class="kw">|</span> <span class="ex">jq</span> .</span></code></pre></div>
<h3 id="full-extraction">Full Extraction</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> document.kmd <span class="at">-d</span> extracted/</span></code></pre></div>
<hr />
<h2 id="compatibility">Compatibility</h2>
<h3 id="version-compatibility">Version Compatibility</h3>
<ul>
<li><code>.kmd</code> files note their version in
<code>format.json</code></li>
<li>Newer Korppi versions read older formats</li>
<li>Format upgrades happen automatically on save</li>
<li>Version checks prevent data loss from incompatible readers</li>
</ul>
<h3 id="markdown-compatibility">Markdown Compatibility</h3>
<p>The <code>content.md</code> file is extended GitHub Flavored
Markdown:</p>
<ul>
<li><strong>Standard GFM</strong> features work in any markdown
renderer</li>
<li><strong>Cross-references</strong> (<code>@type:label</code>) are
Korppi/Pandoc-specific</li>
<li><strong>Labels</strong> (<code>{#type:label}</code>) are stripped on
export to other formats</li>
</ul>
<hr />
<h2 id="creating-kmd-programmatically">Creating .kmd
Programmatically</h2>
<p>You can create a <code>.kmd</code> file with minimal structure:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create minimal structure</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> mydoc</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;# Hello&quot;</span> <span class="op">&gt;</span> mydoc/content.md</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;{&quot;kmd_version&quot;:&quot;0.1.0&quot;,&quot;min_reader_version&quot;:&quot;0.1.0&quot;}&#39;</span> <span class="op">&gt;</span> mydoc/format.json</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;{&quot;uuid&quot;:&quot;123&quot;,&quot;title&quot;:&quot;Hello&quot;,&quot;created_at&quot;:&quot;2024-01-01T00:00:00Z&quot;,&quot;modified_at&quot;:&quot;2024-01-01T00:00:00Z&quot;,&quot;authors&quot;:[]}&#39;</span> <span class="op">&gt;</span> mydoc/meta.json</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Package as .kmd</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> mydoc <span class="kw">&amp;&amp;</span> <span class="fu">zip</span> <span class="at">-r</span> ../hello.kmd . <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> ..</span></code></pre></div>
<hr />
<h2 id="related">Related</h2>
<ul>
<li><a href="export.html">Export Options</a> - Exporting to other
formats</li>
<li><a href="timeline.html">Timeline</a> - Understanding patches</li>
<li><a href="cross-references.html">Cross-References</a> - Using
figures, sections, and tables</li>
</ul>
            </article>

            <footer class="footer">
                <p>Last updated: 2025-12-17</p>
                <div class="badges">
                    <span>MADE WITH ♥</span>
                    <span>HTML 4.0</span>
                    <span>640x480</span>
                    <span>BEST VIEWED IN NETSCAPE</span>
                </div>
                <p style="margin-top: 12px;">
                    <a href="https://github.com/b-rodrigues/korppi">★ Visit us on GitHub ★</a>
                </p>
            </footer>
        </main>
    </div>
</body>

</html>