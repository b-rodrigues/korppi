<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Korppi - A modern markdown editor with timeline tracking and reconciliation features">
    <meta name="keywords" content="korppi, markdown, editor, timeline, version control, document editing">
    <meta name="author" content="Korppi Team">
    <title>File Format - Korppi Documentation</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="page-wrapper">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header"><a href="index.html" >KORPPI</a></div><div class="sidebar-section"><div class="sidebar-title">Getting Started</div><ul><li><a href="rationale.html" >Rationale</a></li><li><a href="installation.html" >Installation</a></li><li><a href="quick-start.html" >Quick Start</a></li></ul></div><div class="sidebar-section"><div class="sidebar-title">Documentation</div><ul><li><a href="profile.html" >Configure Profile</a></li><li><a href="first-document.html" >Your First Document</a></li><li><a href="formatting.html" >Text Formatting</a></li><li><a href="comments.html" >Comments and Reviews</a></li><li><a href="timeline.html" >Timeline and History</a></li><li><a href="reconciliation.html" >Reconciliation</a></li><li><a href="export.html" >Export Options</a></li></ul></div><div class="sidebar-section"><div class="sidebar-title">Reference</div><ul><li><a href="keyboard-shortcuts.html" >Keyboard Shortcuts</a></li><li><a href="file-format.html" class="current">File Format (.kmd)</a></li><li><a href="configuration.html" >Configuration</a></li></ul></div><div class="sidebar-section"><div class="sidebar-title">Help</div><ul><li><a href="faq.html" >FAQ</a></li><li><a href="troubleshooting.html" >Troubleshooting</a></li><li><a href="contributing.html" >Contributing</a></li></ul></div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <h1>File Format</h1>
            </header>

            <article class="content">
<h1 id="the-kmd-file-format">The .kmd File Format</h1>
<p>Technical details about Korppi's native document format.</p>
<hr />
<h2 id="overview">Overview</h2>
<p>The <code>.kmd</code> (Korppi Markdown Document) format is a
ZIP-based container that stores:</p>
<ul>
<li>Markdown content</li>
<li>Version history (timeline)</li>
<li>Comments and annotations</li>
<li>Document metadata</li>
<li>Collaborative editing state</li>
</ul>
<hr />
<h2 id="file-structure">File Structure</h2>
<p>A <code>.kmd</code> file is a ZIP archive with this structure:</p>
<pre><code>document.kmd (ZIP archive)
├── content.md           # Main markdown content
├── meta.json            # Document metadata
├── patches/             # Timeline patches
│   ├── index.json       # Patch list
│   └── *.json           # Individual patches
├── comments.json        # Comments and threads
└── ystate.bin           # Yjs CRDT state (binary)</code></pre>
<hr />
<h2 id="contentmd">content.md</h2>
<p>The main document content in plain Markdown format.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># My Document</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>This is the actual markdown content of your document.</span></code></pre></div>
<hr />
<h2 id="metajson">meta.json</h2>
<p>Document metadata:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;uuid-here&quot;</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;My Document&quot;</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;modified_at&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T15:30:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;author&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Jane Doe&quot;</span><span class="fu">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#ff5733&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;0.1.0&quot;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="patches">patches/</h2>
<p>The timeline patches directory contains:</p>
<h3 id="indexjson">index.json</h3>
<p>List of all patches:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;patches&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;patch-001.json&quot;</span><span class="ot">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;patch-002.json&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="patch-json">patch-*.json</h3>
<p>Individual patch files:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;patch-001&quot;</span><span class="fu">,</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;author&quot;</span><span class="fu">:</span> <span class="st">&quot;Jane Doe&quot;</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Added introduction section&quot;</span><span class="fu">,</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;approved&quot;</span><span class="fu">,</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lines&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;end&quot;</span><span class="fu">:</span> <span class="dv">15</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;diff&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;added&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;removed&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;modified&quot;</span><span class="fu">:</span> <span class="dv">5</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="commentsjson">comments.json</h2>
<p>All comments and threads:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;comments&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;comment-001&quot;</span><span class="fu">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;author&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Jane Doe&quot;</span><span class="fu">,</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;color&quot;</span><span class="fu">:</span> <span class="st">&quot;#ff5733&quot;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;This needs clarification&quot;</span><span class="fu">,</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-07T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="st">&quot;unresolved&quot;</span><span class="fu">,</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;anchor&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">&quot;end&quot;</span><span class="fu">:</span> <span class="dv">150</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;replies&quot;</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="ystatebin">ystate.bin</h2>
<p>Binary Yjs CRDT state for real-time sync.</p>
<p>This file enables:</p>
<ul>
<li>Conflict-free editing</li>
<li>State synchronization</li>
<li>Undo/redo history</li>
<li>Collaborative editing</li>
</ul>
<p>⚠️ This file is binary and not human-readable.</p>
<hr />
<h2 id="working-with-kmd-files">Working with .kmd Files</h2>
<h3 id="extracting-content">Extracting Content</h3>
<p>To extract just the markdown:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> <span class="at">-p</span> document.kmd content.md <span class="op">&gt;</span> output.md</span></code></pre></div>
<h3 id="inspecting-metadata">Inspecting Metadata</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> <span class="at">-p</span> document.kmd meta.json <span class="kw">|</span> <span class="ex">jq</span> .</span></code></pre></div>
<h3 id="full-extraction">Full Extraction</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> document.kmd <span class="at">-d</span> extracted/</span></code></pre></div>
<hr />
<h2 id="compatibility">Compatibility</h2>
<h3 id="version-compatibility">Version Compatibility</h3>
<ul>
<li><code>.kmd</code> files note their version in
<code>meta.json</code></li>
<li>Newer Korppi versions read older formats</li>
<li>Format upgrades happen automatically on save</li>
</ul>
<h3 id="markdown-compatibility">Markdown Compatibility</h3>
<p>The <code>content.md</code> file is standard GitHub Flavored Markdown
and can be:</p>
<ul>
<li>Opened in any text editor</li>
<li>Rendered by GitHub, GitLab, etc.</li>
<li>Processed by pandoc, mkdocs, etc.</li>
</ul>
<hr />
<h2 id="creating-kmd-programmatically">Creating .kmd
Programmatically</h2>
<p>You can create a <code>.kmd</code> file with minimal structure:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create minimal structure</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> mydoc</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;# Hello&quot;</span> <span class="op">&gt;</span> mydoc/content.md</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;{&quot;id&quot;:&quot;123&quot;,&quot;title&quot;:&quot;Hello&quot;,&quot;version&quot;:&quot;0.1.0&quot;}&#39;</span> <span class="op">&gt;</span> mydoc/meta.json</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Package as .kmd</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> mydoc <span class="kw">&amp;&amp;</span> <span class="fu">zip</span> <span class="at">-r</span> ../hello.kmd . <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> ..</span></code></pre></div>
<hr />
<h2 id="related">Related</h2>
<ul>
<li><a href="export.html">Export Options</a> - Exporting to other
formats</li>
<li><a href="timeline.html">Timeline</a> - Understanding patches</li>
</ul>
            </article>

            <footer class="footer">
                <p>Last updated: 2025-12-12</p>
                <div class="badges">
                    <span>MADE WITH ♥</span>
                    <span>HTML 4.0</span>
                    <span>640x480</span>
                    <span>BEST VIEWED IN NETSCAPE</span>
                </div>
                <p style="margin-top: 12px;">
                    <a href="https://github.com/b-rodrigues/korppi">★ Visit us on GitHub ★</a>
                </p>
            </footer>
        </main>
    </div>
</body>

</html>